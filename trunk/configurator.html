<!--
Copyright (C) 2005 The Regents of the University of California.
Produced at Lawrence Livermore National Laboratory (cf, DISCLAIMER).
Written by Morris Jette <jette@llnl.gov> and Danny Auble <da@llnl.gov>
UCRL-CODE-2002-040.

This file is part of SLURM, a resource management program.
For details, see <http://www.llnl.gov/linux/slurm/>.

SLURM is free software; you can redistribute it and/or modify it under
the terms of the GNU General Public License as published by the Free
Software Foundation; either version 2 of the License, or (at your option)
any later version.

SLURM is distributed in the hope that it will be useful, but WITHOUT ANY
WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more
details.

You should have received a copy of the GNU General Public License along
with SLURM; if not, write to the Free Software Foundation, Inc.,
59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.

$Id$
-->
<HTML>
<HEAD><TITLE>SLURM System Configuration</TITLE>
<SCRIPT type="text/javascript">

function get_field(name,form)
{
  if (form.value)
     return name + "=" + form.value
  return "#" + name + "="
}

function get_radio_value(form)
{
  for (var i=0; i < form.length; i++)
  {
    if (form[i].checked)
    {
      return form[i].value
    }
  }
}

function displayfile()
{
  var printme = "# Slurm.conf file generated by configurator.html<br>" +
   "ControlMachine=" + document.config.control_machine.value + "<br>" +
   get_field("ControlAddr",document.config.control_addr) + "<br>" +
   get_field("BackupController",document.config.backup_controller) + "<br>" +
   get_field("BackupAddr",document.config.backup_addr) + "<br>" +
   "# <br>" +
   "SlurmUser=" + document.config.slurm_user.value + "<br>" +
   "SlurmctldPort=" + document.config.slurmctld_port.value + "<br>" +
   "SlurmdPort=" + document.config.slurmd_port.value + "<br>" +
   "AuthType=auth/" + get_radio_value(document.config.auth_type) + "<br>" +
   "StateSaveLocation=" + document.config.state_save_location.value + "<br>" +
   "SlurmdSpoolDir=" + document.config.slurmd_spool_dir.value + "<br>" +
   "SchedulerType=sched/" + get_radio_value(document.config.sched_type) + "<br>" +
   "SwitchType=sched/" + get_radio_value(document.config.switch_type) + "<br>" +
   "SelectType=sched/" + get_radio_value(document.config.select_type) + "<br>" +
   "# <br>" +
   "SlurmctldDebug=" + document.config.slurmctld_debug.value + "<br>" +
   get_field("SlurmctldLogFile",document.config.slurmctld_logfile) + "<br>" +
   "SlurmdDebug=" + document.config.slurmd_debug.value + "<br>" +
   get_field("SlurmdLogFile",document.config.slurmd_logfile) + "<br>" +
   "JobCompType=jobcomp/" + get_radio_value(document.config.job_comp_type) + "<br>" +
   get_field("JobCompLoc",document.config.job_comp_loc) + "<br>" +
   "<br>"
    
    document.write(printme);
                        
}


</SCRIPT>
</HEAD>
<BODY>
<!-- <FORM ACTION="http://www.cs.tut.fi/cgi-bin/run/~jkorpela/echo.cgi">
-->
<FORM name=config>
<H1>SLURM Configration</H1>
<P>This form can be used to create a SLURM configuration file with 
you controlling many of the important configuration parameters.
Some parameters will be set to default values, but you can
manually edit the resulting <I>slurm.conf</I> as desired
for greater flexibiilty. See <I>man slurm.conf</I> for more
details about the configuration parameters.

<P>After you have filled in the fields of interest, use the 
"Submit" button on the bottom of the page to build the <I>slurm.conf</I>
file. It will appear on your web browser. Save the file in text format 
as <I>slurm.conf</I> and use it.

<P>For more information about SLURM, see
<A HREF="http://www.llnl.gov/linux/slurm">http://www.llnl.gov/linux/slurm</A>

<H2>Control Machines</H2>
Define the hostname of the computer on which the SLURM controller and
optional backup controller will execute. You can also specify addresses
of these computers if desired (defaults to their hostnames).
The IP addresses can be either numeric IP addresses or names.
Hostname values should should not be the fully qualified domain 
name (e.g. use <I>linux</I> rather than <I>linux.llnl.gov</I>).
<P>
<input type="text" name="control_machine" value="master"> Master Controller Hostname
<P>
<input type="text" name="control_addr"> Master Controller Address (optional)
<P>
<input type="text" name="backup_controller"> Backup Controller Hostname (optional)
<P>
<input type="text" name="backup_addr"> Backup Controller Address (optional)
<P>

<H2>SLURM User</H2>
The SLURM controller (slurmctld) can run without elevated privileges, 
so it is recommended that a user "slurm" be created for it. For testing 
purposes any user name can be used.
<P>
<input type="text" name="slurm_user" value="slurm">  SLURM user name
<P>

<H2>SLURM Port Numbers</H2>
The SLURM controller (slurmctld) requires a unique port for communcations 
as do the SLURM compute node deamonds (slurmd). If not set, slurm ports 
are set by checking for an entry in <I>/etc/services</I> and if that 
fails by using an interal default set at SLURM build time. 
<P>
<input type="text" name="slurmctld_port" value="7010">  Slurmctld Port
<P>
<input type="text" name="slurmd_port" value="7011">  Slurmd Port
<P>

<H2>Authentication Method</H2>
Define the method used for communicating between SLURM components.
Select one:<BR>
<input type="radio" name="auth_type" value="none"> No authentication, not recommended 
  production use<br>
<input type="radio" name="auth_type" value="authd"> Brent Chun's authd<br>
<input type="radio" name="auth_type" value="munge" checked> LLNL's munge<br>
<P>

<H2>State Preservation</H2>
Define the location of a directory where the slurmctld daemon saves its state. 
This should be a fully qualified pathname which can be read and written to 
by the SLURM user on both the control machine and backup controller (if configured).
The location of a directory where slurmd saves state should also be defined.
This must be a unique directory on each compute server (local disk).
<P>
<input type="text" name="state_save_location" value="/tmp"> Slurmctld state save directory
<P>
<input type="text" name="slurmd_spool_dir" value="/tmp/slurmd"> Slurmd state save directory
<P>
 
<H2>Scheduler</H2>
Define the mechanism to be used for controlling job ordering.
Select one:<BR>
<input type="radio" name="sched_type" value="builtin"> First-In First-Out (FIFO)<BR>
<input type="radio" name="sched_type" value="backfill" checked> FIFO with backfill<BR>
<input type="radio" name="sched_type" value="wiki"> Wiki interface to Maui 
  (configuration parameters SchedulerAuth and SchedulerPort must be manually set)<BR>
<P>

<H2>Interconnect</H2>
Define the node interconnect used.
Select one:<BR>
<input type="radio" name="switch_type" value="elan"> Quadrics Elan3 and Elan4<BR>
<input type="radio" name="switch_type" value="federation"> IBM Federation Switch<BR>
<input type="radio" name="switch_type" value="none" checked> No special handling required
  (InfiniBand, Myrinet, Ethernet, etc.)<BR>
<P>

<H2>Resource Selection</H2>
Define resource (node) selection to be used.
Select one:<BR>
<input type="radio" name="select_type" value="cons_res"> Allocate individual processors and memory<BR>
<input type="radio" name="select_type" value="linear" checked> Node-base resource allocation,
  does not manage indivual processor allocation<BR>
<input type="radio" name="select_type" value="bluegene"> BlueGene systems only<BR>
<P>

<H2>Event Logging</H2>
Slurmctld and slurmd daemons can each be configured with different 
levels of logging verbosity from 0 (quiet) to 7 (extremely verbose).
Each may also be configured to use debug files. Use fully qualified 
pathnames for the files.
<P>
<input type="text" name="slurmctld_debug" value="3"> Slurmctld debug level (0 to 7)
<P>
<input type="text" name="slurmctld_logfile" value=""> Slurmctld Log File (default is none, log goes to syslog)
<P>
<input type="text" name="slurmd_debug" value="3"> Slurmd debug level (0 to 7)
<P>
<input type="text" name="slurmd_logfile" value=""> Slurmd Log File (default is none, log goes to syslog)
<P>

<H2>Job Completion Logging</H2>
Define the job completion logging mechanism to be used. Select one:<BR>
<input type="radio" name="job_comp_type" value="none" checked> No job completion logging<BR>
<input type="radio" name="job_comp_type" value="filetxt"> Write job completion status to a text file<BR>
<input type="radio" name="job_comp_type" value="script"> Use an arbitrary script to log job completion<BR>
<P>
<input type="text" name="job_comp_loc" value=""> Location specification. 
This is the location of the text file to be written to or the script to be run (depends
upon logging mode). Use a fully qualified pathname.

<BR> 
<BR>
<input type=submit value="Submit" name="send" onClick="displayfile()">
<input type=reset value="Reset Form">
<P>
</FORM>
<HR>
</BODY>

