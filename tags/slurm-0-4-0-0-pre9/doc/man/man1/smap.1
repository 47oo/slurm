.TH SMAP "1" "October 2004" "smap 0.4" "Slurm components"

.SH "NAME"
smap \- graphically view information about SLURM jobs, partitions, and set 
configurations parameters.

.SH "SYNOPSIS"
\fBsmap\fR [\fIOPTIONS\fR...] 
.SH "DESCRIPTION"
\fBsmap\fR is used to graphically view job, partition and node information 
for a system running SLURM. 

.SH "OPTIONS"
.TP
\fB\-\-help\fR,
Print a message describing all \fBsmap\fR options.
.TP
\fB\-\-usage\fR
Print a brief message listing the \fBsmap\fR options.
.TP
\fB\-D <option>\fR, \fB\-\-display=<option>\fR
sets the display mode for smap. Showing revelant information about specific 
views and displaying a corresponding node chart. While in any 
display a user can switch by typing a different view letter.  This is true in
all modes except for 'configure mode' user can type 'quit' to exit just 
configure mode.  Typing 'exit' will end the configuration mode and exit smap.
Note that unallocated nodes are indicated by a '.' and DOWN or DRAINED 
nodes by a '#'.
.RS
.TP 15
.I "j"
Displays information about jobs running on system.
.TP 
.I "s"
Displays information about slurm partitions on the system
.TP
.I "b"
Displays information about BGL partitions on the system
.TP
.I "c"
Displays current node states and allows users to configure the system.
.RE
.TP
\fB\-h\fR, \fB\-\-noheader\fR
Do not print a header on the output.
.TP
\fB\-i <seconds>\fR , \fB\-\-iterate=<seconds>\fR
Print the state on a periodic basis. 
Sleep for the indicated number of seconds between reports.
User can exit at anytime by typing 'q' or hitting the return key.
If user is in configure mode type 'exit' to exit program, 'quit' 
to exit configure mode.
.TP
\fB\-V\fR , \fB\-\-version\fR
Print version information and exit.

.SH "OUTPUT FIELD DESCRIPTIONS"
.TP
\fBAVAIL\fR
Partition state: \fBup\fR or \fBdown\fR.
.TP
\fBBGL_BLOCK\fR
BGL Block Name\fR.
.TP
\fBCONN\fR
Connection Type: \fBTORUS\fR or \fBMESH\fR.
.TP
\fBID\fR
Key to identify the nodes associated with this entity in the node chart.
.TP
\fBMODE\fR
Mode Type: \fBCOPROCESS\fR or \fBVIRTUAL\fR.
.TP
\fBNAME\fR
Name of the job.
.TP
\fBNODELIST\fR
Names of nodes associated with this configuration/partition.
.TP
\fBNODES\fR
Count of nodes with this particular configuration.
.TP
\fBPARTITION\fR
Name of a partition.  Note that the suffix "*" identifies the
default partition.
.TP
\fBST\fR
State of a job in compact form. Possible states include:
PD (pending), R (running), CG (completing),  CD  (completed), 
F (failed), TO (timeout), and NF (node failure). See 
\fBJOB STATE CODES\fR section below for more information.
.TP
\fBSTATE\fR
State of the nodes. Possible states include: down, unknown,
idle, allocated, drained, draining, completing and their
abbreviated forms: down, unk, idle, alloc, drain, drng, and
comp respectively.  Note that the suffix "*" identifies nodes
that are presently not responding.
See \fBNODE STATE CODES\fR section below for more information.
\fBTIMELIMIT\fR
Maximum time limit for any user job in
days:hours:minutes:seconds.  \fBinfinite\fR is used to identify
jobs or partitions without a job time limit.
.TP

.SH "TOPOGRAPHY INFORMATION"
.PP
The node chart is designed to indicate relative locations of 
the nodes. 
On most Linux clusters this will represent a one-dimensional 
array of nodes. Larger clusters will utilize multiple as needed 
with right side of one line being logically followed by the 
left side of the next line.
.PP
.nf
On Blue Gene systems, the node chart will indicate the three 
dimensional topography of the system.
The X dimension will increase from left to right on a given line.
The Y dimension will increase in planes from bottom to top.
The Z dimension will increase within a plane from the back 
line to the front line of a plane.
Note the example below:

ID JOBID PARTITION USER   NAME ST TIME NODES NODELIST
a  12345 batch    joseph tst1 R  43:12   64 bgl[000x333]
b  12346 debug    chris  sim3 R  12:34   16 bgl[420x533]
c  12350 debug    danny  job3 R   0:12    8 bgl[622x733]
d  12356 debug    dan    colu R  18:05   16 bgl[600x731]
e  12378 debug    joseph asx4 R   0:34    4 bgl[612x713]

   a a a a b b d d
  a a a a b b d d
 a a a a b b c c
a a a a b b c c

   a a a a b b d d
  a a a a b b d d
 a a a a b b c c
a a a a b b c c

   a a a a . . d d
  a a a a . . d d
 a a a a . . e e              Y
a a a a . . e e               |
                              |
   a a a a . . d d            0----X
  a a a a . . d d            /
 a a a a . . . .            /
a a a a . . . #            Z

.fi

.SH "CONFIGURATION INSTRUCTIONS"
.PP
For Admin use. From this screen one can create a configuration 
file that is used to partition and wire the system into usable
blocks.  

.TP
\fBOUTPUT\fR

.TP
.I "BGL_BLOCK" BGL Block Name.
.TP
.I "CONN"
Connection Type: \fBTORUS\fR or \fBMESH\fR.
.TP
.I "ID"
Key to identify the nodes associated with this entity in the node chart.
.TP
.I "MODE"
Mode Type: \fBCOPROCESS\fR or \fBVIRTUAL\fR.
	
.TP
\fBINPUT COMMANDS\fR
.TP
.I "CREATE" 
Submit request for partition creation. There are two main ways this 
can be used. Primarily the admin can specify either a size number or on 
a BGL system a XYZ coord can be given like this 1x1x1.

exp: \fBcreate 8\fR this will request a creation of 8 meaning a cube of 1x2x4 
or 2x2x2 which ever fits into the configuration.

.nf
You can also add options like 
	Connection=TORUS 
	Mode=VIRTUAL
	Rotate 
	Elongate.

All command entries are case insensitive.   

There are a few defaults that exist, namely,

\fBConnection = MESH\fR 
\fBRotation   = FALSE\fR 
\fBElongation = FALSE\fR 
\fBMode       = COPROC\fR 
.fi

.TP
.I "COPY"
Submit request for partition to be copied. There are two main ways this 
can be used. Primarily the admin can either type 'c' or 'copy' and smap
will copy the last entry configured.  If you want to copy a specific 
partition you can specify a particular ID.  If a number is placed behind then 
there will be that many copies made.

.nf
exp: \fBc\fR this will request a copy of the last partition created.
exp: \fBc A\fR this will request a copy of partition A.
exp: \fBc A 8\fR this will request 8 copies of partition A.
.fi

.TP
.I "DELETE"
Delete last partition created. (Also can use REMOVE, or DROP)

.nf
exp: \fBdelete\fR this will delete last partition created.
.fi

.TP
.I "SAVE"
Save system into a bluegene.conf file into the path of the user.

.nf
exp: \fBsave\fR this will save system into a bluegene.conf.timestamp file.
exp: \fBsave mybluegenefile.conf\fR this will save system into a file named mybluegenefile.conf file.
.fi

.TP
.I "CLEAR ALL"
Clear all partitions created. (Also can use CLEAR)

.nf
exp: \fBclear all\fR this will clear the entire system.
.fi

.SH "NODE STATE CODES"
.PP
Node state codes are shortened as required for the field size.
If the node state code is followed by "*", this indicates the
node is presently not responding and will not be allocated
any new work.  If the node remains non-responsive, it will
be placed in the \fBDOWN\fR state (except in the case of
\fBDRAINED\fR, \fBDRAINING\fR, or \fBCOMPLETING\fR nodes).
.TP 12
ALLOCATED
The node has been allocated to one or more jobs.
.TP
COMPLETING
One or more jobs have been allocated this node and are in
the process of COMPLETING. This node state will be removed when
all of the job's processes have terminated and the SLURM
epilog program (if any) has terminated. See the \fBEpilog\fR
parameter description in the \fBslurm.conf\fR man page for
more information.
.TP
DOWN
The node is unavailable for use. SLURM can automatically
place nodes in this state if some failure occurs. System
administrators may also explicitly place nodes in this state. If
a node resumes normal operation, SLURM can automatically
return it to service. See the \fBReturnToService\fR
and \fBSlurmdTimeout\fR parameter descriptions in the
\fBslurm.conf\fR(5) man page for more information.
.TP
DRAINED
The node is unavailable for use per system administrator
request.  See the \fBupdate node\fR command in the
\fBscontrol\fR(1) man page or the \fBslurm.conf\fR(5) man page
for more information.
.TP
DRAINING
The node is currently executing a job, but will not be allocated
to additional jobs. The node state will be changed to state
\fBDRAINED\fR when the last job on it completes. Nodes enter
this state per system administrator request. See the \fBupdate
node\fR command in the \fBscontrol\fR(1) man page or the
\fBslurm.conf\fR(5) man page for more information.
.TP
IDLE
The node is not allocated to any jobs and is available for use.
.TP
UNKNOWN
The SLURM controller has just started and the node's state
has not yet been determined.

.SH "JOB STATE CODES"
Jobs typically pass through several states in the course of their
execution.
The typical states are PENDING, RUNNING, COMPLETING, and COMPLETED.
An explanation of each state follows.
.TP 20
CA  CANCELLED
Job was explicitly cancelled by the user or system administrator.
The job may or may not have been initiated.
.TP
CD  COMPLETED
Job has terminated all processes on all nodes.
.TP
CG  COMPLETING
Job is in the process of completing. Some processes on some nodes may still be active.
.TP
F   FAILED
Job terminated with non-zero exit code or other failure condition.
.TP
NF  NODE_FAIL
Job terminated due to failure of one or more allocated nodes.
.TP
PD  PENDING
Job is awaiting resource allocation.
.TP
R   RUNNING
Job currently has an allocation.
.TP
TO  TIMEOUT
Job terminated upon reaching its time limit.

.SH "COPYING"
Copyright (C) 2004 The Regents of the University of California.
Produced at Lawrence Livermore National Laboratory (cf, DISCLAIMER).
UCRL-CODE-2002-040.
.LP
This file is part of SLURM, a resource management program.
For details, see <http://www.llnl.gov/linux/slurm/>.
.LP
SLURM is free software; you can redistribute it and/or modify it under
the terms of the GNU General Public License as published by the Free
Software Foundation; either version 2 of the License, or (at your option)
any later version.
.LP
SLURM is distributed in the hope that it will be useful, but WITHOUT ANY
WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more
details.
.SH "SEE ALSO"
\fBscontrol\fR(1), fBsinfo\fR(1), \fBsqueue\fR(1), 
\fBslurm_load_ctl_conf\fR(3), \fBslurm_load_jobs\fR(3), \fBslurm_load_node\fR(3), 
\fBslurm_load_partitions\fR(3), 
\fBslurm_reconfigure\fR(3), \fBslurm_shutdown\fR(3), 
\fBslurm_update_job\fR(3), \fBslurm_update_node\fR(3), 
\fBslurm_update_partition\fR(3),
\fBslurm.conf\fR(5)
